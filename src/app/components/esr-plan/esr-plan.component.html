<h1>ESR-Plan</h1>


<div class="esrWahl">
<button class="noprint" (click)="wahl('rhythmus')">Rhythmus</button>
<button class="noprint" (click)="wahl('epoche')">Epoche</button>
<button class="noprint" (click)="wahl('schiene')">Schiene</button>
</div>



<h2>
  {{gewaehlterPlan[0].toUpperCase()}}{{gewaehlterPlan.substring(1)}}
</h2>


<div class="zeile noprint">
  Klasse 9:
  <ng-container *ngFor="let ele of tabellensortierung(ix)"> <button class="epochen" (click)="epochenWahl(ele)">
      <span *ngFor="let leh of ele.lehrer">{{leh.kuerzel}}</span>|{{ele.fach}}
    </button>
  </ng-container>
</div>
<div class="zeile noprint">
  Klasse 10:
  <ng-container *ngFor="let ele of tabellensortierung(x)">
    <button class="epochen" (click)="epochenWahl(ele)">
      <span *ngFor="let leh of ele.lehrer">{{leh.kuerzel}}</span>|{{ele.fach}}
    </button>
  </ng-container>
</div>
<div class="zeile noprint">

  Klasse 11:
  <ng-container *ngFor="let ele of tabellensortierung(xi)"> <button class="epochen" (click)="epochenWahl(ele)">
      <span *ngFor="let leh of ele.lehrer">{{leh.kuerzel}}</span>|{{ele.fach}}
    </button>
  </ng-container>
</div>
<div class="zeile noprint">
  Klasse 12:
  <ng-container *ngFor="let ele of tabellensortierung(xii)"> <button class="epochen" (click)="epochenWahl(ele)">
      <span *ngFor="let leh of ele.lehrer">{{leh.kuerzel}}</span>|{{ele.fach}}
    </button>
  </ng-container>
</div>

<div class="planRahmen">
  <ng-container *ngFor="let montagtag of esrPlan; index as d">

    <ng-container *ngIf="montagtag.tag.getDay()==1">
      <!-- wenn montag nur zeigen      .... dann mo, di, mi, do, fr anzeigen!-->
      <ng-container *ngIf="d<esrPlan.length-4">
        <ng-container
          *ngIf="(esrPlan[d].frei==false||esrPlan[d+1].frei==false||esrPlan[d+2].frei==false||esrPlan[d+3].frei==false||esrPlan[d+4].frei==false); else LEERWOCHE">
          <div class="wochenRahmen">
            <!--irgendein Tag Schule? sonst LEERwoche-->

            <ng-container *ngFor="let tag of [esrPlan[d],esrPlan[d+1], esrPlan[d+2], esrPlan[d+3], esrPlan[d+4]]">

              <!-- wann soll tag angezeigt werden? Nur wenn nicht frei ist...-->
              <div class="tagesContainer {{ferienServ.tagZuString(tag.tag)}}">
                <div class="Monat">
                  <ng-container
                    *ngIf="tag.tag.getDay()==1&&(d>=7&&ferienServ.monatZuString(tag.tag)!=ferienServ.monatZuString(esrPlan[d-7].tag)||d<7)">
                    {{ferienServ.monatZuString(tag.tag)}} {{tag.tag.getFullYear()}}
                  </ng-container>
                </div>
                <div class="Datum  {{tag.frei}} {{tag.notiz}}">
                  <!--<ng-container *ngIf="tag.tag.getDay()==1">-->
                  {{tag.tag.getDate() }}
                </div>
                <div class="Tag">
                  {{ferienServ.tagZuString(tag.tag)}}
                </div>
                <div class="tagesButtonContainer {{ferienServ.tagZuString(tag.tag)}}">
                  <ng-container *ngIf="(ferienServ.tagZuString(tag.tag)=='Mo'); else LEER">
                    <button class="{{gewaehlterPlan}} 8" (click)="click($event,8,  d, 'acht',tag.tag.getDay())">
                      <!--
                      <div class="{{duplicates(unt.lehrer, tag)}}" *ngFor="let unt of tag[gewaehlterPlan].acht">
                        {{unt.lehrer[0].kuerzel}}
                      </div>
                      -->
                    </button>
                  </ng-container>
                  <ng-container *ngIf="(ferienServ.tagZuString(tag.tag)=='Mo'); else LEER">
                    <button class="{{gewaehlterPlan}} 9" (click)="click($event,9,  d, 'neun',tag.tag.getDay())">
                      <div class="ganztag" *ngIf="tag.ganztaegig.neun!=null"> {{tag.ganztaegig.neun}}
                      </div>
                                        <ng-container *ngFor="let el of grundPlanfaecher">
                        <ng-container *ngIf="el!=null&&el.klasse==9">
                        <ng-container *ngFor="let startende of el.zuweisung[gewaehlterPlan]">
                          <ng-container *ngIf="tag.tag.getTime()>=startende.start&&tag.tag.getTime()<=startende.ende">  
                            <ng-container *ngFor="let lehr of el.lehrer">
                              <div class="{{duplicates(lehr, tag.tag)}} {{marked(lehr)}}">
                                {{lehr.kuerzel +"("+ el.fach + ")"}}
                              </div>
                            </ng-container>
                            </ng-container>
                          </ng-container>
                        </ng-container>
                      </ng-container>
                      <!--
                      <div class="{{duplicates(unt.lehrer, tag)}}" *ngFor="let unt of tag[gewaehlterPlan].neun">
                        {{unt.lehrer[0].kuerzel}}
                      </div>
-->
                    </button>
                  </ng-container>
                  <ng-container *ngIf="(ferienServ.tagZuString(tag.tag)=='Mo'); else LEER">
                    <button class="{{gewaehlterPlan}} 10" (click)="click($event,10,d, 'zehn',tag.tag.getDay())">
                      <div class="ganztag" *ngIf="tag.ganztaegig.zehn!=null"> {{tag.ganztaegig.zehn}}</div>
                      <ng-container *ngFor="let el of grundPlanfaecher">
                        <ng-container *ngIf="el!=null&&el.klasse==10">
                        <ng-container *ngFor="let startende of el.zuweisung[gewaehlterPlan]">
                          <ng-container *ngIf="tag.tag.getTime()>=startende.start&&tag.tag.getTime()<=startende.ende">
                            <ng-container *ngFor="let lehr of el.lehrer">
                              <div class="{{duplicates(lehr, tag.tag)}} {{marked(lehr)}}">
                                {{lehr.kuerzel +"("+ el.fach + ")"}}
                              </div>
                            </ng-container>
                            </ng-container>
                          </ng-container>
                        </ng-container>
                      </ng-container>

                      <!--
                      <div class="{{duplicates(unt.lehrer, tag)}}" *ngFor="let unt of tag[gewaehlterPlan].zehn">
                        {{unt.lehrer[0].kuerzel}}
                      </div>
                      -->

                    </button>
                  </ng-container>
                  <ng-container *ngIf="(ferienServ.tagZuString(tag.tag)=='Mo'); else LEER">
                    <button class="{{gewaehlterPlan}} 11" (click)="click($event,11, d,'elf',tag.tag.getDay())">
                      <div class="ganztag" *ngIf="tag.ganztaegig.elf!=null"> {{tag.ganztaegig.elf}}</div>
                      <ng-container *ngFor="let el of grundPlanfaecher">
                        <ng-container *ngIf="el!=null&&el.klasse==11">
                        <ng-container *ngFor="let startende of el.zuweisung[gewaehlterPlan]">
                          <ng-container *ngIf="tag.tag.getTime()>=startende.start&&tag.tag.getTime()<=startende.ende">
                            <ng-container *ngFor="let lehr of el.lehrer">
                              <div class="{{duplicates(lehr, tag.tag)}} {{marked(lehr)}}">
                                {{lehr.kuerzel +"("+ el.fach + ")"}}
                              </div>
                            </ng-container>
                            </ng-container>
                          </ng-container>
                        </ng-container>
                      </ng-container>
                         <!--
                      <div class="{{duplicates(unt.lehrer, tag)}}" *ngFor="let unt of tag[gewaehlterPlan].elf">
                        {{unt.lehrer[0].kuerzel}}
                      </div>
                      -->

                    </button>
                  </ng-container>
                  <ng-container *ngIf="(ferienServ.tagZuString(tag.tag)=='Mo'); else LEER">
                    <button class="{{gewaehlterPlan}} 12" (click)="click($event,12, d,'zwoelf',tag.tag.getDay())">
                      <div class="ganztag" *ngIf="tag.ganztaegig.zwoelf!=null"> {{tag.ganztaegig.zwoelf}}</div>
                      <ng-container *ngFor="let el of grundPlanfaecher">
                        <ng-container *ngIf="el!=null&&el.klasse==12">
                        <ng-container *ngFor="let startende of el.zuweisung[gewaehlterPlan]">
                          <ng-container *ngIf="tag.tag.getTime()>=startende.start&&tag.tag.getTime()<=startende.ende">
                            <ng-container *ngFor="let lehr of el.lehrer">
                              <div class="{{duplicates(lehr, tag.tag)}} {{marked(lehr)}}">
                                {{lehr.kuerzel +"("+ el.fach + ")"}} 
                              </div>
                            </ng-container>
                            </ng-container>
                          </ng-container>
                        </ng-container>
                      </ng-container>
                      <!--
                      <div class="{{duplicates(unt.lehrer, tag)}}" *ngFor="let unt of tag[gewaehlterPlan].zwoelf">
                        {{unt.lehrer[0].kuerzel}}
                      </div>
-->
                    </button>
                  </ng-container>
                  <ng-template #LEER>
                    <div class="fakeButton">

                    </div>

                  </ng-template>
                  <span *ngIf="tag.notiz!='schule'" class="sonderNotiz {{tag.notiz}}">
                    {{tag.notiz}}
                  </span>
                </div>
              </div>
            </ng-container>
          </div>
        </ng-container>
        <ng-template #LEERWOCHE>
          <div class="wochenRahmen">
            <div class="ferien">
              <!--  <div class="Jahr"> </div>-->
              <div class="Monat">
                <ng-container
                  *ngIf="montagtag.tag.getDay()==1&&(d>=7&&ferienServ.monatZuString(montagtag.tag)!=ferienServ.monatZuString(esrPlan[d-7].tag))">
                  {{ ferienServ.monatZuString(montagtag.tag)}} {{montagtag.tag.getFullYear()}}
                </ng-container>
              </div>
              <div class="Datum {{montagtag.frei}} {{montagtag.notiz}}">
                {{montagtag.tag.getDate() }}
              </div>
              <div class="Tag">
                {{ferienServ.tagZuString(montagtag.tag)}}
              </div>
              <div class="ferienNotiz {{montagtag.notiz}}">
                {{montagtag.notiz}}
              </div>
            </div>
          </div>
        </ng-template>

      </ng-container>
    </ng-container>
  </ng-container>
</div>
